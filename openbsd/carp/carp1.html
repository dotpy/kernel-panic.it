<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="resource-type" content="document" />
  <meta name="keywords" content="kernel,panic,OpenBSD,firewall,cluster,PF,CARP,pfsync,security,docs" />
  <meta name="distribution" content="global" />
  <meta name="author" content="Daniele Mazzocchio" />
  <meta name="copyright" content="This document copyright 2005-2018 by Kernel-Panic.it." />

  <title>Redundant firewalls with OpenBSD, CARP and pfsync - Introduction</title>

  <link rel="stylesheet" type="text/css" href="../../css/docs.css" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

</head>

<body>

  <div class="navigation">
    <ul>
      <li class="prev"><a class="nav-list" href="index.html"><span>Previous</span></a></li>
      <li class="up"><a class="nav-list" href="../../openbsd.html"><span>Up</span></a></li>
      <li class="next"><a class="nav-list" href="carp2.html"><span>Next</span></a></li>
      <li class="home"><a class="nav-list" href="../../index.html"><span>Home</span></a></li>
    </ul>
    <h3>Redundant firewalls with OpenBSD, CARP and pfsync</h3>
    <div>Previous: <a href="index.html">Table of contents</a>&nbsp;
         Up: <a href="../../openbsd.html">OpenBSD</a>&nbsp;
         Next: <a href="carp2.html">2. Network description</a>
    </div>
  </div>

  <hr />

<h2>1. Introduction</h2>

<p>Firewalls are among the most critical components in a network infrastructure, since their failure may cause entire groups of machines to go offline. The damage may range from the public (web, mail, DNS, etc.) servers to become unreachable from the outside world up to being unable to surf this web site!</p>
<p>Using firewall clusters can dramatically reduce these risks, making the failure of a firewall completely transparent to users. Also, maintenance (patching, upgrading, rebooting...) becomes much easier and faster when relying on a backup machine, thus indirectly increasing systems security and reliability.</p>
<p>On the other hand, it's true that redundancy increases hardware costs and can't solve each and every problem, like transparent transfer of certain protocols (e.g. <acronym title="Secure SHell">SSH</acronym> or <acronym title="Internet Relay Chat">IRC</acronym>) between systems or synchronizing data between clustered machines (in matter of fact, we will rely on two different protocols for <a href="carp4.html">failover</a> and <a href="carp5.html">synchronization</a>).</p>
<p>The tools we will use to build our failover cluster are:</p>

<dl class="padded">
  <dt><a href="http://www.openbsd.org/">OpenBSD</a></dt>
  <dd>largely considered one of the most secure OSes around, with <q>only two remote holes in the default install, in a heck of a long time!</q>;</dd>
  <dt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf&amp;sektion=4">Packet Filter</a> (PF)</dt>
  <dd>OpenBSD's system for filtering TCP/IP traffic and doing Network Address Translation;</dd>
  <dt><a href="https://man.openbsd.org/carp">CARP</a> (Common Address Redundancy Protocol)</dt>
  <dd>the protocol that achieves system redundancy, by having multiple computers creating a single, virtual network interface between them;</dd>
  <dt><a href="https://man.openbsd.org/pfsync">pfsync</a></dt>
  <dd>the protocol that allows PF state tables to be synchronized between multiple firewalls.</dd>
</dl>

<p>A good knowledge of OpenBSD and PF is assumed, since we won't cover topics like <a href="https://man.openbsd.org/pfctl"><tt>pfctl(8)</tt></a> and <a href="https://man.openbsd.org/pf.conf"><tt>pf.conf(5)</tt></a> syntax. Anyway, the <a href="carp7.html">appendix</a> contains some useful links for more on these topics.</p>

  <hr />

  <div class="navigation">
    <ul>
      <li class="prev"><a class="nav-list" href="index.html"><span>Previous</span></a></li>
      <li class="up"><a class="nav-list" href="../../openbsd.html"><span>Up</span></a></li>
      <li class="next"><a class="nav-list" href="carp2.html"><span>Next</span></a></li>
      <li class="home"><a class="nav-list" href="../../index.html"><span>Home</span></a></li>
    </ul>
    <h3>Redundant firewalls with OpenBSD, CARP and pfsync</h3>
    <div>Previous: <a href="index.html">Table of contents</a>&nbsp;
         Up: <a href="../../openbsd.html">OpenBSD</a>&nbsp;
         Next: <a href="carp2.html">2. Network description</a>
    </div>
  </div>

</body>

</html>
